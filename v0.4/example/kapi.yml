kapi: v0.4
type: api

info:
  title: Example API
  version: 1.0.0

imports:
  libraries:
  - includes/errors.yml
  - includes/health.yml

routes:
  /api:
    get:
      summary: API Documentation
      responses:
        200:
          content:
            text/html:
              value: any
  /health:
    get:
      summary: Service Health Info
      responses:
        200:
          summary: Success
          content:
            application/json:
              value: types.ServiceHealthInfo
  /users:
    get:
      summary: User List
      responses:
        200:
          summary: Success
          content:
            application/json:
              value: list[User]
        401: responses.Unauthorized
        500: responses.InternalError
    post:
      request:
        content:
          application/json:
            value: types.NewUserRequest
      responses:
        200:
          content:
            application/json:
              value: types.User
  /users/{user-id}:
    uri:
    - name: user-id
      value:
        type: integer
        format: uint64
    get:
      responses:
        200:
          content:
            application/json:
              value: types.User
        401: responses.Unauthorized
        404: responses.NotFound
        500: responses.InternalError

components:

  types:
    Username:
      type: string
      minLength: 3
      maxLength: 64
    User:
      type: object
      properties:
        userId:
          type: integer
          format: uint64
        username: types.Username
        created:
          type: date
          format: datetime-tz
    NewUserRequest:
      type: object
      properties:
        username:
          type: types.Username


